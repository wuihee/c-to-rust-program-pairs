{
    "$schema": "http://json-schema.org/draft-07/schema",
    "title": "C-to-Rust Translation Schema",
    "description": "Complete schema for C-to-Rust program translation projects and individual pairs",
    "definitions": {
        "program_name": {
            "type": "string",
            "description": "Name of the program",
            "minLength": 1
        },
        "program_description": {
            "type": "string",
            "description": "Brief description of what the program does"
        },
        "repository_url": {
            "type": "string",
            "format": "uri",
            "description": "Repository URL (GitHub, GitLab, etc.)"
        },
        "documentation_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to detailed description or documentation"
        },
        "translation_method": {
            "type": "string",
            "enum": [
                "manual",
                "semi-automatic",
                "automatic"
            ],
            "description": "Translation process type. Manual: hand-written from scratch. Semi-automatic: mix of automated tools and manual work. Automatic: primarily tool-generated"
        },
        "translation_tool": {
            "type": "string",
            "description": "Tool used for the translation process"
        },
        "feature_relationship": {
            "type": "string",
            "enum": [
                "superset",
                "subset",
                "equivalent",
                "overlapping"
            ],
            "description": "Feature relationship between C and Rust implementations"
        },
        "dependencies": {
            "type": "object",
            "description": "Build dependencies for each operating system",
            "properties": {
                "linux": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "mac": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "windows": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "build_commands": {
            "type": "array",
            "description": "Commands to build the program",
            "items": {
                "type": "string"
            }
        },
        "test_commands": {
            "type": "array",
            "description": "Commands to test the program",
            "items": {
                "type": "string"
            }
        },
        "source_paths": {
            "type": "array",
            "description": "Paths to source files",
            "items": {
                "type": "string"
            }
        },
        "executable_paths": {
            "type": "array",
            "description": "Path to compiled executable",
            "items": {
                "type": "string"
            }
        },
        "project_program": {
            "type": "object",
            "description": "Program-specific configuration (per individual pair)",
            "properties": {
                "source_paths": {
                    "$ref": "#/definitions/source_paths"
                },
                "executable_paths": {
                    "$ref": "#/definitions/executable_paths"
                }
            },
            "required": [
                "source_paths",
                "executable_paths"
            ],
            "additionalProperties": false
        },
        "project_global_program": {
            "type": "object",
            "description": "Global program configuration (shared across all pairs)",
            "properties": {
                "documentation_url": {
                    "$ref": "#/definitions/documentation_url"
                },
                "repository_url": {
                    "$ref": "#/definitions/repository_url"
                },
                "build_commands": {
                    "$ref": "#/definitions/build_commands"
                },
                "test_commands": {
                    "$ref": "#/definitions/test_commands"
                },
                "dependencies": {
                    "$ref": "#/definitions/dependencies"
                }
            },
            "required": [
                "documentation_url",
                "repository_url",
                "build_commands",
                "test_commands",
                "dependencies"
            ],
            "additionalProperties": false
        },
        "individual_program": {
            "allOf": [
                {
                    "$ref": "#/definitions/project_program"
                },
                {
                    "$ref": "#/definitions/project_global_program"
                }
            ],
            "description": "Complete program configuration combining global and specific settings",
            "additionalProperties": false
        },
        "individual_program_pair": {
            "type": "object",
            "description": "A single C-to-Rust program pair",
            "properties": {
                "program_name": {
                    "$ref": "#/definitions/program_name"
                },
                "program_description": {
                    "$ref": "#/definitions/program_description"
                },
                "translation_method": {
                    "$ref": "#/definitions/translation_method"
                },
                "translation_tool": {
                    "$ref": "#/definitions/translation_tool"
                },
                "feature_relationship": {
                    "$ref": "#/definitions/feature_relationship"
                },
                "c_program": {
                    "$ref": "#/definitions/individual_program"
                },
                "rust_program": {
                    "$ref": "#/definitions/individual_program"
                }
            },
            "required": [
                "program_name",
                "program_description",
                "c_program",
                "rust_program"
            ],
            "additionalProperties": false
        },
        "project_program_pair": {
            "type": "object",
            "description": "A program pair within a project context",
            "properties": {
                "program_name": {
                    "$ref": "#/definitions/program_name"
                },
                "program_description": {
                    "$ref": "#/definitions/program_description"
                },
                "c_program": {
                    "$ref": "#/definitions/project_program"
                },
                "rust_program": {
                    "$ref": "#/definitions/project_program"
                }
            },
            "required": [
                "program_name",
                "program_description",
                "c_program",
                "rust_program"
            ],
            "additionalProperties": false
        }
    },
    "oneOf": [
        {
            "title": "Individual Pairs Metadata",
            "description": "Schema for standalone C-to-Rust program pairs",
            "type": "object",
            "properties": {
                "pairs": {
                    "type": "array",
                    "description": "Array of standalone program pair configurations",
                    "items": {
                        "$ref": "#/definitions/individual_program_pair"
                    }
                }
            },
            "required": [
                "pairs"
            ],
            "additionalProperties": false
        },
        {
            "title": "Project Pairs Metadata",
            "description": "Schema for C-to-Rust project program pairs",
            "type": "object",
            "properties": {
                "project_information": {
                    "type": "object",
                    "description": "Global project information and build configuration",
                    "properties": {
                        "program_name": {
                            "$ref": "#/definitions/program_name"
                        },
                        "translation_method": {
                            "$ref": "#/definitions/translation_method"
                        },
                        "translation_tool": {
                            "$ref": "#/definitions/translation_tool"
                        },
                        "feature_relationship": {
                            "$ref": "#/definitions/feature_relationship"
                        },
                        "c_program": {
                            "$ref": "#/definitions/project_global_program"
                        },
                        "rust_program": {
                            "$ref": "#/definitions/project_global_program"
                        }
                    },
                    "required": [
                        "program_name",
                        "translation_method",
                        "c_program",
                        "rust_program"
                    ],
                    "additionalProperties": false
                },
                "pairs": {
                    "type": "array",
                    "description": "Array of individual program pairs within the project",
                    "items": {
                        "$ref": "#/definitions/project_program_pair"
                    }
                }
            },
            "required": [
                "project_information",
                "pairs"
            ],
            "additionalProperties": false
        }
    ]
}